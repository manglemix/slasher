[gd_scene load_steps=16 format=2]

[ext_resource path="res://player/camera/lerper.gd" type="Script" id=1]
[ext_resource path="res://player/protagonist.tscn" type="PackedScene" id=2]
[ext_resource path="res://flow_map/shader/basic_flowmap_material.shader" type="Shader" id=3]
[ext_resource path="res://grid_map/level_grid.tres" type="MeshLibrary" id=4]
[ext_resource path="res://flow_map/flowmap2.png" type="Texture" id=5]
[ext_resource path="res://flow_map/background2.png" type="Texture" id=6]
[ext_resource path="res://bot/bot.tscn" type="PackedScene" id=7]
[ext_resource path="res://ui/ui.tscn" type="PackedScene" id=8]
[ext_resource path="res://medieval_level/testing.gd" type="Script" id=9]
[ext_resource path="res://medieval_level/background/bg_city3.tres" type="ArrayMesh" id=10]
[ext_resource path="res://turn_area.gd" type="Script" id=11]

[sub_resource type="PlaneMesh" id=1]

[sub_resource type="ShaderMaterial" id=2]
shader = ExtResource( 3 )
shader_param/albedo = Color( 1, 1, 1, 1 )
shader_param/specular = null
shader_param/metallic = null
shader_param/roughness = null
shader_param/metallic_texture_channel = Plane( 1, 0, 0, 0 )
shader_param/roughness_texture_channel = Plane( 1, 0, 0, 0 )
shader_param/emission = null
shader_param/emission_energy = null
shader_param/refraction = null
shader_param/refraction_texture_channel = Plane( 1, 0, 0, 0 )
shader_param/uv_scale = Vector2( 1, 1 )
shader_param/uv_offset = null
shader_param/proximity_fade_distance = null
shader_param/distance_fade_min = null
shader_param/distance_fade_max = null
shader_param/normal_scale = null
shader_param/flow_normal_influence = null
shader_param/flow_map_x_channel = Plane( 1, 0, 0, 0 )
shader_param/flow_map_y_channel = Plane( 0, 1, 0, 0 )
shader_param/channel_flow_direction = Vector2( 1, -1 )
shader_param/blend_cycle = 1.0
shader_param/cycle_speed = 1.0
shader_param/flow_speed = 0.5
shader_param/noise_texture_channel = Plane( 1, 0, 0, 0 )
shader_param/flow_noise_size = Vector2( 1, 1 )
shader_param/flow_noise_influence = 0.5
shader_param/texture_albedo = ExtResource( 6 )
shader_param/texture_flow_map = ExtResource( 5 )

[sub_resource type="Environment" id=3]
fog_enabled = true
fog_color = Color( 0.305882, 0.317647, 0.54902, 1 )
fog_depth_enabled = false
fog_depth_end = 60.0
fog_height_enabled = true
fog_height_max = -5.0

[sub_resource type="BoxShape" id=4]

[node name="Spatial" type="Spatial"]
script = ExtResource( 9 )

[node name="ClassicCharacter" parent="." instance=ExtResource( 2 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, 2.59545, 0 )

[node name="ControllableCharacterMovement" parent="ClassicCharacter" index="4"]
basis_node_path = NodePath("../../Lerper/Lerper/Camera")

[node name="SoftBody" parent="ClassicCharacter" index="8"]
transform = Transform( -0.976169, 0.00128463, -0.21701, 0.0016758, 0.999997, -0.00161854, 0.217007, -0.00194363, -0.976168, -0.195, 0.418383, 0.00948172 )
total_mass = 3.0
linear_stiffness = 0.16
volume_stiffness = 0.35
attachments/0/offset = Vector3( 0.341088, 0.357864, 0.0232065 )
attachments/1/offset = Vector3( 0.0661458, 0.297234, 0.43375 )

[node name="Lerper" type="Spatial" parent="."]
script = ExtResource( 1 )
_target_path = NodePath("../ClassicCharacter/CameraTarget")
_basis_target_path = NodePath(".")

[node name="Lerper" type="Spatial" parent="Lerper"]
script = ExtResource( 1 )
_target_path = NodePath(".")

[node name="Camera" type="Camera" parent="Lerper/Lerper"]
transform = Transform( -1, 0, -3.25841e-07, 0, 1, 0, 3.25841e-07, 0, -1, 0, 0.40819, -10.1474 )
fov = 50.0

[node name="MeshInstance" type="MeshInstance" parent="Lerper/Lerper/Camera"]
transform = Transform( 50, -3.25854e-07, 4.27306e-13, 0, -4.37114e-08, -30, 1.62927e-05, 1, -1.31134e-06, 1.48998e-05, 2.38419e-07, -45.7271 )
mesh = SubResource( 1 )
material/0 = SubResource( 2 )

[node name="bot" parent="." instance=ExtResource( 7 )]
transform = Transform( -0.216734, 0, -0.348537, 0, 0.410429, 0, 0.348537, 0, -0.216734, -7.00378, -0.0669408, 0.422863 )

[node name="UI" parent="." instance=ExtResource( 8 )]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 3 )

[node name="GridMap" type="GridMap" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.828486 )
mesh_library = ExtResource( 4 )
data = {
"cells": PoolIntArray( 2, 0, 262145, 65526, 0, 655364, 65527, 0, 655364, 65528, 0, 655365, 65529, 0, 655363, 65538, 0, 262145, 131062, 0, 262145, 131073, 0, 524291, 131074, 0, 262145, 196598, 0, 262145, 196609, 0, 524289, 196610, 0, 524289, -262144, 0, 1, -262143, 0, 1, -262142, 0, 536870913, -196618, 0, 1, -196617, 0, 1, -196616, 0, 1, -196615, 0, 1, -196614, 0, 1, -196613, 0, 1, -196612, 0, 1, -196611, 0, 1, -196610, 0, 1, -196609, 0, 1, -196608, 0, 4, -196607, 0, 1, -196606, 0, 1, -131082, 0, 1, -131081, 0, 1, -131080, 0, 1, -131079, 0, 1, -131078, 0, 1, -131077, 0, 1, -131076, 0, 1, -131075, 0, 4, -131074, 0, 1, -131073, 0, 1, -131072, 0, 1, -131071, 0, 1, -131070, 0, 1, -65546, 0, 1, -65545, 0, 1, -65544, 0, 536870913, -65543, 0, 4, -65542, 0, 1, -65541, 0, 1, -65540, 0, 1, -65539, 0, 1, -65538, 0, 1, -65537, 0, 1, -65536, 0, 1, -65535, 0, 1, -65534, 0, 1, -10, 0, 1, -9, 0, 1, -8, 0, 1, -7, 0, 1, -6, 0, 1, -5, 0, 1, -4, 0, 1, -3, 0, 1, -2, 0, 1, -1, 0, 1, 65528, 1, 536870913, 65529, 1, 1, 65530, 1, 196609, 131064, 1, 4, 131065, 1, 4, 131066, 1, 196613, 196600, 1, 1, 196601, 1, 1, -2, 1, 1, -2, 2, 1, -2, 3, 1, -2, 4, 1, -2, 5, 1 )
}
__meta__ = {
"_editor_clip_": 0,
"_editor_floor_": Vector3( -2, 0, 1 )
}

[node name="Spatial" type="Spatial" parent="."]
transform = Transform( 2.04503, 0, 0, 0, 2.04503, 0, 0, 0, 2.04503, 0, -3.52562, 12.8804 )

[node name="bg_city3" type="MeshInstance" parent="Spatial"]
transform = Transform( -2.41025, 0, -0.505371, 0, 2.46266, 0, 0.505371, 0, -2.41025, 3.2607, 4.35514, 4.93689 )
mesh = ExtResource( 10 )
material/0 = null

[node name="bg_city4" type="MeshInstance" parent="Spatial"]
transform = Transform( -2.41025, 0, -0.505371, 0, 2.46266, 0, 0.505371, 0, -2.41025, -12.4539, 5.584, 10.0221 )
mesh = ExtResource( 10 )
material/0 = null

[node name="bg_city5" type="MeshInstance" parent="Spatial"]
transform = Transform( -2.41025, 0, -0.505371, 0, 2.46266, 0, 0.505371, 0, -2.41025, -24.7915, 1.6572, 6.09163 )
mesh = ExtResource( 10 )
material/0 = null

[node name="Area" type="Area" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2.99772, 0.988659, 0 )
script = ExtResource( 11 )
rotations = PoolRealArray( 0, 90 )

[node name="CollisionShape" type="CollisionShape" parent="Area"]
shape = SubResource( 4 )

[editable path="ClassicCharacter"]
