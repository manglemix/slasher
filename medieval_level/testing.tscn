[gd_scene load_steps=25 format=2]

[ext_resource path="res://player/camera/lerper.gd" type="Script" id=1]
[ext_resource path="res://player/protagonist.tscn" type="PackedScene" id=2]
[ext_resource path="res://ui/ui.tscn" type="PackedScene" id=3]
[ext_resource path="res://grid_map/level_grid.meshlib" type="MeshLibrary" id=4]
[ext_resource path="res://flow_map/skyY.material" type="Material" id=5]
[ext_resource path="res://wormhole_area.gd" type="Script" id=6]
[ext_resource path="res://bot/bot.tscn" type="PackedScene" id=7]
[ext_resource path="res://node_flag.gd" type="Script" id=8]
[ext_resource path="res://medieval_level/river.obj" type="ArrayMesh" id=9]
[ext_resource path="res://medieval_level/background/bg_city3.tres" type="ArrayMesh" id=10]
[ext_resource path="res://turn_area.gd" type="Script" id=11]
[ext_resource path="res://addons/astar_navigation/scripts/linked_node.gd" type="Script" id=12]
[ext_resource path="res://addons/astar_navigation/scripts/astar_navigation.gd" type="Script" id=13]
[ext_resource path="res://flow_map/water.material" type="Material" id=14]
[ext_resource path="res://medieval_level/earthyyyy.mesh" type="ArrayMesh" id=15]
[ext_resource path="res://flow_map/blackBodyI.material" type="Material" id=16]
[ext_resource path="res://flow_map/blackBody.material" type="Material" id=17]

[sub_resource type="Environment" id=1]
background_mode = 1
fog_enabled = true
fog_color = Color( 0.305882, 0.317647, 0.54902, 1 )
fog_depth_enabled = false
fog_depth_end = 60.0
fog_height_enabled = true
fog_height_max = -5.0

[sub_resource type="BoxShape" id=2]

[sub_resource type="BoxShape" id=3]

[sub_resource type="SphereMesh" id=4]

[sub_resource type="SpatialMaterial" id=5]
flags_unshaded = true

[sub_resource type="PlaneMesh" id=6]
material = ExtResource( 5 )

[sub_resource type="CubeMesh" id=7]

[node name="Spatial" type="Spatial"]

[node name="UI" parent="." instance=ExtResource( 3 )]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 1 )

[node name="Protagonist" parent="." instance=ExtResource( 2 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 4.32255, 0.362128, 2.72159 )
collision_layer = 0

[node name="FaceMovement" parent="Protagonist" index="2"]
movement_source_path = NodePath("../../Protagonist")

[node name="MovementInput" parent="Protagonist" index="3"]
basis_node_path = NodePath("../../Lerper/Lerper/Spatial/Camera")

[node name="ControllableAttack" parent="Protagonist" index="5"]
character_animator_path = NodePath("../../Protagonist/CharacterAnimator")

[node name="SoftBody" parent="Protagonist" index="7"]
transform = Transform( -0.976169, 0.00128463, -0.21701, 0.0016758, 0.999997, -0.00161854, 0.217007, -0.00194363, -0.976168, -0.195, 0.418383, 0.00948172 )
total_mass = 3.0
linear_stiffness = 0.16
volume_stiffness = 0.35
attachments/0/offset = Vector3( 5.32411, -11.481, 1.11509 )
attachments/1/offset = Vector3( 2.70464, -12.9676, 0.424718 )

[node name="BoneAttachment" parent="Protagonist/Armature/Skeleton" index="1"]
transform = Transform( -0.113773, -0.105966, -0.98784, -0.384145, 0.921656, -0.054623, 0.916235, 0.373259, -0.145566, -0.159217, 1.4935, 0.242449 )

[node name="CharacterAnimator" parent="Protagonist" index="9"]
character_jump_path = NodePath("../../Protagonist/ControllableCharacterJump")

[node name="NodeFlag" type="Node" parent="Protagonist"]
script = ExtResource( 8 )
property_name = "player"

[node name="Lerper" type="Spatial" parent="."]
script = ExtResource( 1 )
_target_path = NodePath("../Protagonist/CameraTarget")
_basis_target_path = NodePath(".")

[node name="Lerper" type="Spatial" parent="Lerper"]
script = ExtResource( 1 )
_target_path = NodePath(".")

[node name="Spatial" type="Spatial" parent="Lerper/Lerper"]

[node name="Camera" type="Camera" parent="Lerper/Lerper/Spatial"]
transform = Transform( -1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0.958855, -10 )
current = true
fov = 60.0
near = 3.0
far = 200.0

[node name="RemoteTransform" type="RemoteTransform" parent="Lerper/Lerper/Spatial/Camera"]
transform = Transform( -1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0 )
remote_path = NodePath("../../../../../skyPivot")
update_rotation = false
update_scale = false

[node name="NodeFlag" type="Node" parent="Lerper"]
script = ExtResource( 8 )
property_name = "camera_base"

[node name="bot" parent="." instance=ExtResource( 7 )]
transform = Transform( -0.210847, 0, 0.977519, 0, 1, 0, -0.977519, 0, -0.210847, -2.93431, -1.76868, 2.78758 )
collision_layer = 2147483648

[node name="Area" type="Area" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -10.8631, -0.97276, 3.01471 )
script = ExtResource( 11 )
rotations = PoolRealArray( 0, 90 )

[node name="CollisionShape" type="CollisionShape" parent="Area"]
shape = SubResource( 2 )

[node name="Area2" type="Area" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -11.0993, 1.12036, 31.0577 )
script = ExtResource( 11 )
rotations = PoolRealArray( 0, 90 )

[node name="CollisionShape" type="CollisionShape" parent="Area2"]
shape = SubResource( 2 )

[node name="Navigation" type="Node" parent="."]
script = ExtResource( 13 )
dimension = 1

[node name="LinkedNode" type="Position3D" parent="Navigation"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.08462, -0.234856, 2.9938 )
script = ExtResource( 12 )
link_paths = [ NodePath("../LinkedNode2") ]

[node name="LinkedNode2" type="Position3D" parent="Navigation"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -10.8037, 1.1516, 2.9938 )
script = ExtResource( 12 )
link_paths = [ NodePath("../LinkedNode5"), NodePath("../LinkedNode3") ]

[node name="LinkedNode3" type="Position3D" parent="Navigation"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -11.196, 0.656684, 30.9309 )
script = ExtResource( 12 )
link_paths = [ NodePath("../LinkedNode4") ]

[node name="LinkedNode4" type="Position3D" parent="Navigation"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -33.2176, 3.19756, 31.3944 )
script = ExtResource( 12 )

[node name="LinkedNode5" type="Position3D" parent="Navigation"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -34.7954, 3.42273, 2.95334 )
script = ExtResource( 12 )

[node name="WormholeArea" type="Area" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 7.84149, 0, 0 )
script = ExtResource( 6 )

[node name="CollisionShape" type="CollisionShape" parent="WormholeArea"]
shape = SubResource( 3 )

[node name="WormholeSource" type="MeshInstance" parent="WormholeArea"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.32933, 2.36897 )
mesh = SubResource( 4 )
material/0 = SubResource( 5 )

[node name="Props" type="Spatial" parent="."]
transform = Transform( 2.04503, 0, 0, 0, 2.04503, 0, 0, 0, 2.04503, 0, -3.52562, 12.8804 )

[node name="bg_city" type="MeshInstance" parent="Props"]
transform = Transform( -4.18178, 0, -2.79428, 0, 5.02942, 0, 2.79428, 0, -4.18178, 4.83088, 10.8557, 29.3851 )
mesh = ExtResource( 10 )
material/0 = null

[node name="bg_city2" type="MeshInstance" parent="Props"]
transform = Transform( -4.93725, 0, 0.958543, 0, 5.02942, 0, -0.958543, 0, -4.93725, -23.9416, 10.8557, 29.3851 )
mesh = ExtResource( 10 )
material/0 = null

[node name="River" type="MeshInstance" parent="Props"]
transform = Transform( 2.74539, 0, 0, 0, 1.24917, 0, 0, 0, 2.31085, -7.43468, -0.458042, -5.40776 )
extra_cull_margin = 10.0
mesh = ExtResource( 9 )
material/0 = ExtResource( 14 )

[node name="River2" type="MeshInstance" parent="Props"]
transform = Transform( 2.74539, 0, 0, 0, 1.24917, 0, 0, 0, 2.31085, -7.43468, -0.458042, -0.784721 )
extra_cull_margin = 10.0
mesh = ExtResource( 9 )
material/0 = ExtResource( 14 )

[node name="River3" type="MeshInstance" parent="Props"]
transform = Transform( 2.74539, 0, 0, 0, 1.24917, 0, 0, 0, 2.31085, -7.43468, -0.458042, 8.56295 )
extra_cull_margin = 10.0
mesh = ExtResource( 9 )
material/0 = ExtResource( 14 )

[node name="earthyyyy" type="MeshInstance" parent="Props"]
transform = Transform( 0.605688, 0, 0, 0, 0.605688, 0, 0, 0, 0.605688, 1.48875, 0.407456, -6.8224 )
mesh = ExtResource( 15 )
material/0 = ExtResource( 17 )
material/1 = null

[node name="earthyyyy4" type="MeshInstance" parent="Props"]
transform = Transform( 0.804932, 0, 0, 0, 0.804932, 0, 0, 0, 0.804932, 1.48875, 0.407456, -1.95455 )
mesh = ExtResource( 15 )
material/0 = ExtResource( 17 )
material/1 = null

[node name="earthyyyy5" type="MeshInstance" parent="Props"]
transform = Transform( -0.95534, 0, 0.608289, 0, 1.07216, 0, 0.650929, 0, 0.883014, 4.76591, 0.407456, 1.90085 )
mesh = ExtResource( 15 )
material/0 = ExtResource( 17 )
material/1 = null

[node name="earthyyyy3" type="MeshInstance" parent="Props"]
transform = Transform( 0.605282, 0, -0.0220995, 0, 0.605688, 0, 0.0220995, 0, 0.605282, -7.97881, 0.219972, -6.78072 )
mesh = ExtResource( 15 )
material/0 = ExtResource( 17 )
material/1 = null

[node name="earthyyyy2" type="MeshInstance" parent="Props"]
transform = Transform( 0.00916485, 0, 0.605615, -0.0018717, 0.605404, 2.83246e-05, 0.551356, -0.00586964, -0.00834369, -7.81206, 0.718865, 0.215694 )
mesh = ExtResource( 15 )
material/0 = ExtResource( 17 )
material/1 = null

[node name="earthyyyy6" type="MeshInstance" parent="Props"]
transform = Transform( -0.530691, 0.00567464, 0.162881, -0.0018717, 0.605404, 2.83246e-05, 0.149804, -0.00150046, 0.583361, -11.9319, 0.718865, 6.16191 )
mesh = ExtResource( 15 )
material/0 = ExtResource( 17 )
material/1 = null

[node name="GridMap" type="GridMap" parent="."]
mesh_library = ExtResource( 4 )
data = {
"cells": PoolIntArray( 65518, 1, 537526272, 65519, 1, 537526272, 65520, 1, 537526272, 65521, 1, 537526275, 65522, 1, 537526273, -131072, 1, 537526272, -131071, 1, 537526272, -131070, 1, 537526272, -131069, 1, 537526272, -131068, 1, 537526272, -131067, 1, 537526272, -131066, 1, 537526272, -131065, 1, 537526272, -65554, 1, 537526272, -65549, 1, -1610612736, -65548, 1, 536870912, -65547, 1, 536870912, -65546, 1, -1610612736, -65545, 1, -1610612736, -65544, 1, 536870912, -65543, 1, 536870912, -65542, 1, 537526272, -65541, 1, 537526272, -65540, 1, 537526272, -65539, 1, 537526272, -65538, 1, 537526272, -65537, 1, 537526272, -65535, 1, -1610612736, -65534, 1, 536870912, -65533, 1, 536870912, -65532, 1, 536870912, -65531, 1, 536870912, -65530, 1, 536870912, -65529, 1, 0, -18, 1, 537526272, -15, 1, 537395201, -14, 1, 537395203, -13, 1, 537526275, -12, 1, -1609957375, -65542, 2, -1610612736, -65542, 3, -1610612736, -65542, 4, -1609170944, -6, 4, -1609170943, -65542, 5, 1441792, -6, 5, -1609170941, -65542, 6, -1609170944, -6, 6, -1609170944, -65542, 7, 538312704, -6, 7, 538312704, -65542, 8, 1441792, -6, 8, 1441792, -65542, 9, 1441792, -6, 9, 1441792, -65542, 10, 1441792, -6, 10, 1441792, -65542, 11, 1441792, -6, 11, 1441792, -65542, 12, 1441792, -6, 12, 1441792, -65542, 13, 1441792, -6, 13, 1441792, -65542, 14, 1441792, -6, 14, 1441792, 65519, 15, 0, 65520, 15, 655360, 65521, 15, 655360, 65522, 15, 655360, 65523, 15, 655363, 65524, 15, 655361, -65553, 15, 537526272, -65551, 15, 537526272, -65549, 15, 655360, -65548, 15, 537526272, -65547, 15, 538312704, -65546, 15, 538312704, -65545, 15, 538312704, -65544, 15, 1441792, -65543, 15, 1441792, -65542, 15, 1441792, -17, 15, 0, -15, 15, 655362, -13, 15, 655362, -12, 15, 1441792, -11, 15, 1441792, -10, 15, 1441792, -9, 15, 1441792, -8, 15, 1441792, -7, 15, 1441792, -6, 15, 1441792 )
}
__meta__ = {
"_editor_clip_": 0,
"_editor_floor_": Vector3( -1, -2, 0 )
}

[node name="GridTrans" type="GridMap" parent="GridMap"]
visible = false
mesh_library = ExtResource( 4 )
data = {
"cells": PoolIntArray( 0, 0, 786436, 1, 0, 786436, 2, 0, 786436, 3, 0, 786436, 4, 0, 786436, 5, 0, 786436, 6, 0, 786436, 65532, 0, -1609826300, 65533, 0, 786436, 65534, 0, 786436, 65535, 0, -1609826300, 65536, 0, 786436, 65537, 0, 786436, 65538, 0, 786436, 65539, 0, 786436, 65540, 0, 786436, 65541, 0, 786436, 65542, 0, 537657348, 131068, 0, 786436, 131069, 0, 786436, 131070, 0, 537657348, 131071, 0, 786436, -65536, 0, 917508, -65535, 0, 917508, -7, 0, 1441796, -6, 0, 917508, -5, 0, 917508, -4, 0, 917508, -3, 0, 917508, -2, 0, 917508, -1, 0, 917508, 7, 1, 786436, 65543, 1, -1609826300, 131079, 1, 786436, 0, 2, 786436, 1, 2, 786436, 2, 2, 786436, 3, 2, 786436, 4, 2, 786436, 5, 2, 786436, 6, 2, 786436, 65531, 2, 786436, 65532, 2, 537657348, 65533, 2, 786436, 65534, 2, 786436, 65535, 2, 537657348, 65536, 2, 786436, 65537, 2, 786436, 65538, 2, -1609826300, 65539, 2, 786436, 65540, 2, 786436, 65541, 2, 537657348, 65542, 2, 537657348, 131067, 2, -1609826300, 131068, 2, -1609826300, 131069, 2, 786436, 131070, 2, 537657348, 131071, 2, 537657348, -65536, 2, 917508, -7, 2, 538312708, -5, 2, 1441796, -4, 2, 917508, -3, 2, 917508, -2, 2, 917508, -1, 2, 917508, -65536, 3, 917508, -65535, 3, 917508, -7, 3, 1441796, -5, 3, 1441796, 65529, 4, 1441796, 65531, 4, 1441796, -7, 4, 1441796, -5, 4, 1441796, 65529, 5, 1441796, 65531, 5, 1441796, 65529, 6, 1441796, 65531, 6, 1441796, 65529, 7, 1441796, 65531, 7, 1441796, 65531, 8, 1441796 )
}
__meta__ = {
"_editor_clip_": 0,
"_editor_floor_": Vector3( 0, -2, 0 )
}

[node name="skyPivot" type="Spatial" parent="."]
transform = Transform( 1, 0, 1.74846e-07, 0, 1, 0, -1.74846e-07, 0, 1, 0, 0.958855, -10 )

[node name="skyMap" type="MeshInstance" parent="skyPivot"]
transform = Transform( -40.5681, 7.28332e-06, 3.54657e-06, -2.3178e-06, 1.1589e-06, -26.5125, -7.28332e-06, -1.08757, -4.75387e-08, 1.29624, 3.47886, 38.9293 )
cast_shadow = 0
extra_cull_margin = 100.0
mesh = SubResource( 6 )
material/0 = null

[node name="fogBox" type="MeshInstance" parent="skyPivot"]
transform = Transform( 20.7178, 0, 0, 0, 20.7178, 0, 0, 0, 20.7178, 0, 1.59033, 0 )
mesh = SubResource( 7 )
material/0 = ExtResource( 16 )

[editable path="Protagonist"]

[editable path="bot"]
